<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>TechnicianManagementMenu.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Local Tech Support CLI Client</a> &gt; <a href="index.source.html" class="el_package">com.localtechsupport.cli.menu.technician</a> &gt; <span class="el_source">TechnicianManagementMenu.java</span></div><h1>TechnicianManagementMenu.java</h1><pre class="source lang-java linenums">package com.localtechsupport.cli.menu.technician;

import com.localtechsupport.cli.menu.BaseMenu;
import com.localtechsupport.cli.menu.Menu;
import com.localtechsupport.cli.menu.MenuOption;
import com.localtechsupport.cli.service.ApiService;
import com.localtechsupport.cli.model.Technician;
import com.localtechsupport.cli.model.Ticket;
import com.localtechsupport.cli.model.Appointment;
import com.localtechsupport.cli.client.ApiException;
import com.localtechsupport.cli.util.DisplayUtils;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;
import java.util.stream.Collectors;
import java.time.format.DateTimeFormatter;
import java.util.Map;
import java.util.HashMap;

/**
 * Menu for technician management operations
 * 
 * Provides comprehensive CRUD operations for technicians including:
 * - View all technicians
 * - Search technicians  
 * - View technician details
 * - Create new technician
 * - Edit technician
 * - Technician status management
 * - Delete technician
 * - Technician reports
 */
public class TechnicianManagementMenu extends BaseMenu {
    
<span class="nc" id="L38">    private static final Logger logger = LoggerFactory.getLogger(TechnicianManagementMenu.class);</span>
    private TechnicianBuilder technicianBuilder;
    
    public TechnicianManagementMenu(Menu parentMenu) {
<span class="nc" id="L42">        super(parentMenu);</span>
<span class="nc" id="L43">    }</span>
    
    @Override
    protected String getMenuTitle() {
<span class="nc" id="L47">        return &quot;TECHNICIAN MANAGEMENT&quot;;</span>
    }
    
    @Override
    protected void displayCustomContent() {
        try {
            // Display current system status
<span class="nc" id="L54">            List&lt;Technician&gt; technicians = apiService.getAllTechnicians();</span>
<span class="nc" id="L55">            long activeCount = technicians.stream().filter(Technician::isActive).count();</span>
<span class="nc" id="L56">            long totalCount = technicians.size();</span>
<span class="nc" id="L57">            long inactiveCount = totalCount - activeCount;</span>
            
<span class="nc" id="L59">            System.out.println(&quot;üìä Current System Status:&quot;);</span>
<span class="nc" id="L60">            System.out.printf(&quot;    Total Technicians: %d (%d active, %d inactive)\n&quot;, </span>
<span class="nc" id="L61">                totalCount, activeCount, inactiveCount);</span>
<span class="nc" id="L62">            System.out.println(&quot;    Recent Activity: Loading...&quot;);</span>
<span class="nc" id="L63">            System.out.println();</span>
            
<span class="nc" id="L65">        } catch (ApiException e) {</span>
<span class="nc" id="L66">            logger.error(&quot;Failed to fetch technician statistics&quot;, e);</span>
<span class="nc" id="L67">            System.out.println(&quot;üìä Current System Status: Unable to load statistics&quot;);</span>
<span class="nc" id="L68">            System.out.println();</span>
<span class="nc" id="L69">        }</span>
<span class="nc" id="L70">    }</span>
    
    @Override
    protected void initializeMenuOptions() {
        // Initialize TechnicianBuilder with scanner from BaseMenu
<span class="nc" id="L75">        this.technicianBuilder = new TechnicianBuilder(scanner);</span>
        
<span class="nc" id="L77">        addActionOption(1, &quot;View All Technicians&quot;, &quot;List all technicians with status&quot;,</span>
            this::viewAllTechnicians);
            
<span class="nc" id="L80">        addActionOption(2, &quot;Search Technicians&quot;, &quot;Find technicians by name/email/skills&quot;, </span>
            this::searchTechnicians);
            
<span class="nc" id="L83">        addActionOption(3, &quot;View Technician Details&quot;, &quot;Detailed view with workload/schedule&quot;,</span>
            this::viewTechnicianDetails);
            
<span class="nc" id="L86">        addActionOption(4, &quot;Create New Technician&quot;, &quot;Add new technician to system&quot;,</span>
            this::createNewTechnician);
            
<span class="nc" id="L89">        addActionOption(5, &quot;Edit Technician&quot;, &quot;Update technician information&quot;,</span>
            this::editTechnician);
            
<span class="nc" id="L92">        addActionOption(6, &quot;Technician Status&quot;, &quot;Activate/deactivate technician accounts&quot;,</span>
            this::manageTechnicianStatus);
            
<span class="nc" id="L95">        addActionOption(7, &quot;Delete Technician&quot;, &quot;Remove technician (with confirmation)&quot;,</span>
            this::deleteTechnician);
            
<span class="nc" id="L98">        addActionOption(8, &quot;Technician Reports&quot;, &quot;Statistics and analytics&quot;,</span>
            this::technicianReports);
<span class="nc" id="L100">    }</span>
    
    // ==================== MENU OPERATIONS ====================
    
    private void viewAllTechnicians() {
<span class="nc" id="L105">        DisplayUtils.printHeader(&quot;ALL TECHNICIANS&quot;);</span>
        
        try {
<span class="nc" id="L108">            List&lt;Technician&gt; technicians = apiService.getAllTechnicians();</span>
            
<span class="nc bnc" id="L110" title="All 2 branches missed.">            if (technicians.isEmpty()) {</span>
<span class="nc" id="L111">                System.out.println(&quot;üì≠ No technicians found in the system.&quot;);</span>
<span class="nc" id="L112">                waitForEnter();</span>
<span class="nc" id="L113">                return;</span>
            }
            
            // Display technicians table
<span class="nc" id="L117">            displayTechniciansTable(technicians);</span>
            
<span class="nc" id="L119">            System.out.println();</span>
<span class="nc" id="L120">            System.out.print(&quot;Enter technician ID to view details (or press Enter to continue): &quot;);</span>
<span class="nc" id="L121">            String input = scanner.nextLine().trim();</span>
            
<span class="nc bnc" id="L123" title="All 2 branches missed.">            if (!input.isEmpty()) {</span>
                try {
<span class="nc" id="L125">                    Long technicianId = Long.parseLong(input);</span>
<span class="nc" id="L126">                    Technician selectedTechnician = technicians.stream()</span>
<span class="nc" id="L127">                        .filter(t -&gt; t.getId().equals(technicianId))</span>
<span class="nc" id="L128">                        .findFirst()</span>
<span class="nc" id="L129">                        .orElse(null);</span>
                        
<span class="nc bnc" id="L131" title="All 2 branches missed.">                    if (selectedTechnician != null) {</span>
<span class="nc" id="L132">                        displayTechnicianDetails(selectedTechnician);</span>
                    } else {
<span class="nc" id="L134">                        DisplayUtils.printError(&quot;Technician not found with ID: &quot; + technicianId);</span>
                    }
<span class="nc" id="L136">                } catch (NumberFormatException e) {</span>
<span class="nc" id="L137">                    DisplayUtils.printError(&quot;Invalid technician ID format.&quot;);</span>
<span class="nc" id="L138">                }</span>
            }
            
<span class="nc" id="L141">        } catch (ApiException e) {</span>
<span class="nc" id="L142">            logger.error(&quot;Failed to fetch technicians&quot;, e);</span>
<span class="nc" id="L143">            DisplayUtils.printError(&quot;Failed to retrieve technicians: &quot; + e.getMessage());</span>
<span class="nc" id="L144">        }</span>
        
<span class="nc" id="L146">        waitForEnter();</span>
<span class="nc" id="L147">    }</span>
    
    private void searchTechnicians() {
<span class="nc" id="L150">        DisplayUtils.printHeader(&quot;SEARCH TECHNICIANS&quot;);</span>
        
<span class="nc" id="L152">        System.out.println(&quot;üîç Search Options:&quot;);</span>
<span class="nc" id="L153">        System.out.println(&quot;   1. Search by Name&quot;);</span>
<span class="nc" id="L154">        System.out.println(&quot;   2. Search by Email&quot;);</span>
<span class="nc" id="L155">        System.out.println(&quot;   3. Search by Skill&quot;);</span>
<span class="nc" id="L156">        System.out.println(&quot;   4. Filter by Status&quot;);</span>
<span class="nc" id="L157">        System.out.println(&quot;   5. View All Technicians&quot;);</span>
<span class="nc" id="L158">        System.out.println();</span>
        
<span class="nc" id="L160">        System.out.print(&quot;Select search option (1-5): &quot;);</span>
<span class="nc" id="L161">        String choice = scanner.nextLine().trim();</span>
        
        try {
<span class="nc" id="L164">            List&lt;Technician&gt; allTechnicians = apiService.getAllTechnicians();</span>
<span class="nc" id="L165">            List&lt;Technician&gt; filteredTechnicians = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L166">            String searchCriteria = &quot;&quot;;</span>
            
<span class="nc bnc" id="L168" title="All 6 branches missed.">            switch (choice) {</span>
                case &quot;1&quot;:
<span class="nc" id="L170">                    System.out.print(&quot;Enter name to search: &quot;);</span>
<span class="nc" id="L171">                    String nameQuery = scanner.nextLine().trim().toLowerCase();</span>
<span class="nc bnc" id="L172" title="All 2 branches missed.">                    if (!nameQuery.isEmpty()) {</span>
<span class="nc" id="L173">                        filteredTechnicians = allTechnicians.stream()</span>
<span class="nc" id="L174">                            .filter(t -&gt; t.getFullName().toLowerCase().contains(nameQuery))</span>
<span class="nc" id="L175">                            .collect(Collectors.toList());</span>
<span class="nc" id="L176">                        searchCriteria = &quot;Name contains: &quot; + nameQuery;</span>
                    }
                    break;
                    
                case &quot;2&quot;:
<span class="nc" id="L181">                    System.out.print(&quot;Enter email to search: &quot;);</span>
<span class="nc" id="L182">                    String emailQuery = scanner.nextLine().trim().toLowerCase();</span>
<span class="nc bnc" id="L183" title="All 2 branches missed.">                    if (!emailQuery.isEmpty()) {</span>
<span class="nc" id="L184">                        filteredTechnicians = allTechnicians.stream()</span>
<span class="nc bnc" id="L185" title="All 4 branches missed.">                            .filter(t -&gt; t.getEmail() != null &amp;&amp; t.getEmail().toLowerCase().contains(emailQuery))</span>
<span class="nc" id="L186">                            .collect(Collectors.toList());</span>
<span class="nc" id="L187">                        searchCriteria = &quot;Email contains: &quot; + emailQuery;</span>
                    }
                    break;
                    
                case &quot;3&quot;:
<span class="nc" id="L192">                    System.out.print(&quot;Enter skill to search (HARDWARE, SOFTWARE, NETWORK, etc.): &quot;);</span>
<span class="nc" id="L193">                    String skillQuery = scanner.nextLine().trim().toUpperCase();</span>
<span class="nc bnc" id="L194" title="All 2 branches missed.">                    if (!skillQuery.isEmpty()) {</span>
<span class="nc" id="L195">                        filteredTechnicians = allTechnicians.stream()</span>
<span class="nc" id="L196">                            .filter(t -&gt; t.hasSkill(skillQuery))</span>
<span class="nc" id="L197">                            .collect(Collectors.toList());</span>
<span class="nc" id="L198">                        searchCriteria = &quot;Has skill: &quot; + skillQuery;</span>
                    }
                    break;
                    
                case &quot;4&quot;:
<span class="nc" id="L203">                    System.out.print(&quot;Enter status (ACTIVE, ON_VACATION, SICK_LEAVE, TERMINATED): &quot;);</span>
<span class="nc" id="L204">                    String statusQuery = scanner.nextLine().trim().toUpperCase();</span>
<span class="nc bnc" id="L205" title="All 2 branches missed.">                    if (!statusQuery.isEmpty()) {</span>
<span class="nc" id="L206">                        filteredTechnicians = allTechnicians.stream()</span>
<span class="nc" id="L207">                            .filter(t -&gt; statusQuery.equals(t.getStatus()))</span>
<span class="nc" id="L208">                            .collect(Collectors.toList());</span>
<span class="nc" id="L209">                        searchCriteria = &quot;Status: &quot; + statusQuery;</span>
                    }
                    break;
                    
                case &quot;5&quot;:
<span class="nc" id="L214">                    filteredTechnicians = allTechnicians;</span>
<span class="nc" id="L215">                    searchCriteria = &quot;All technicians&quot;;</span>
<span class="nc" id="L216">                    break;</span>
                    
                default:
<span class="nc" id="L219">                    DisplayUtils.printError(&quot;Invalid search option.&quot;);</span>
<span class="nc" id="L220">                    waitForEnter();</span>
<span class="nc" id="L221">                    return;</span>
            }
            
            // Display results
<span class="nc" id="L225">            System.out.println();</span>
<span class="nc" id="L226">            DisplayUtils.printHeader(&quot;SEARCH RESULTS - &quot; + searchCriteria);</span>
            
<span class="nc bnc" id="L228" title="All 2 branches missed.">            if (filteredTechnicians.isEmpty()) {</span>
<span class="nc" id="L229">                System.out.println(&quot;üì≠ No technicians found matching your search criteria.&quot;);</span>
            } else {
<span class="nc" id="L231">                System.out.printf(&quot;üìä Found %d technician(s)\n\n&quot;, filteredTechnicians.size());</span>
<span class="nc" id="L232">                displayTechniciansTable(filteredTechnicians);</span>
                
                // Allow viewing details
<span class="nc" id="L235">                System.out.println();</span>
<span class="nc" id="L236">                System.out.print(&quot;Enter technician ID to view details (or press Enter to continue): &quot;);</span>
<span class="nc" id="L237">                String input = scanner.nextLine().trim();</span>
                
<span class="nc bnc" id="L239" title="All 2 branches missed.">                if (!input.isEmpty()) {</span>
                    try {
<span class="nc" id="L241">                        Long technicianId = Long.parseLong(input);</span>
<span class="nc" id="L242">                        Technician selectedTechnician = filteredTechnicians.stream()</span>
<span class="nc" id="L243">                            .filter(t -&gt; t.getId().equals(technicianId))</span>
<span class="nc" id="L244">                            .findFirst()</span>
<span class="nc" id="L245">                            .orElse(null);</span>
                            
<span class="nc bnc" id="L247" title="All 2 branches missed.">                        if (selectedTechnician != null) {</span>
<span class="nc" id="L248">                            displayTechnicianDetails(selectedTechnician);</span>
                        } else {
<span class="nc" id="L250">                            DisplayUtils.printError(&quot;Technician not found in search results.&quot;);</span>
                        }
<span class="nc" id="L252">                    } catch (NumberFormatException e) {</span>
<span class="nc" id="L253">                        DisplayUtils.printError(&quot;Invalid technician ID format.&quot;);</span>
<span class="nc" id="L254">                    }</span>
                }
            }
            
<span class="nc" id="L258">        } catch (ApiException e) {</span>
<span class="nc" id="L259">            logger.error(&quot;Failed to search technicians&quot;, e);</span>
<span class="nc" id="L260">            DisplayUtils.printError(&quot;Failed to search technicians: &quot; + e.getMessage());</span>
<span class="nc" id="L261">        }</span>
        
<span class="nc" id="L263">        waitForEnter();</span>
<span class="nc" id="L264">    }</span>
    
    private void viewTechnicianDetails() {
<span class="nc" id="L267">        DisplayUtils.printHeader(&quot;TECHNICIAN DETAILS&quot;);</span>
        
        try {
<span class="nc" id="L270">            List&lt;Technician&gt; technicians = apiService.getAllTechnicians();</span>
            
<span class="nc bnc" id="L272" title="All 2 branches missed.">            if (technicians.isEmpty()) {</span>
<span class="nc" id="L273">                System.out.println(&quot;üì≠ No technicians found in the system.&quot;);</span>
<span class="nc" id="L274">                waitForEnter();</span>
<span class="nc" id="L275">                return;</span>
            }
            
            // Display technician selection
<span class="nc" id="L279">            System.out.println(&quot;üìã Select a technician to view details:&quot;);</span>
<span class="nc" id="L280">            System.out.println();</span>
<span class="nc" id="L281">            displayTechniciansTable(technicians);</span>
            
<span class="nc" id="L283">            System.out.print(&quot;Enter technician ID: &quot;);</span>
<span class="nc" id="L284">            String input = scanner.nextLine().trim();</span>
            
            try {
<span class="nc" id="L287">                Long technicianId = Long.parseLong(input);</span>
<span class="nc" id="L288">                Technician selectedTechnician = technicians.stream()</span>
<span class="nc" id="L289">                    .filter(t -&gt; t.getId().equals(technicianId))</span>
<span class="nc" id="L290">                    .findFirst()</span>
<span class="nc" id="L291">                    .orElse(null);</span>
                    
<span class="nc bnc" id="L293" title="All 2 branches missed.">                if (selectedTechnician != null) {</span>
<span class="nc" id="L294">                    displayTechnicianDetails(selectedTechnician);</span>
                } else {
<span class="nc" id="L296">                    DisplayUtils.printError(&quot;Technician not found with ID: &quot; + technicianId);</span>
                }
                
<span class="nc" id="L299">            } catch (NumberFormatException e) {</span>
<span class="nc" id="L300">                DisplayUtils.printError(&quot;Invalid technician ID format.&quot;);</span>
<span class="nc" id="L301">            }</span>
            
<span class="nc" id="L303">        } catch (ApiException e) {</span>
<span class="nc" id="L304">            logger.error(&quot;Failed to fetch technicians for details view&quot;, e);</span>
<span class="nc" id="L305">            DisplayUtils.printError(&quot;Failed to retrieve technicians: &quot; + e.getMessage());</span>
<span class="nc" id="L306">        }</span>
        
<span class="nc" id="L308">        waitForEnter();</span>
<span class="nc" id="L309">    }</span>
    
    private void createNewTechnician() {
<span class="nc" id="L312">        DisplayUtils.printHeader(&quot;CREATE NEW TECHNICIAN&quot;);</span>
        
        try {
            // Use TechnicianBuilder to collect input
<span class="nc" id="L316">            Technician newTechnician = technicianBuilder.buildNewTechnician();</span>
            
<span class="nc bnc" id="L318" title="All 2 branches missed.">            if (newTechnician == null) {</span>
<span class="nc" id="L319">                return; // User cancelled</span>
            }
            
            // Create the technician via API
<span class="nc" id="L323">            Technician createdTechnician = apiService.createTechnician(newTechnician);</span>
            
<span class="nc" id="L325">            System.out.printf(&quot;‚úÖ Technician %s created (ID: %d)\n&quot;, </span>
<span class="nc" id="L326">                createdTechnician.getFullName(), createdTechnician.getId());</span>
            
<span class="nc" id="L328">            logger.info(&quot;Created new technician: {} (ID: {})&quot;, </span>
<span class="nc" id="L329">                createdTechnician.getFullName(), createdTechnician.getId());</span>
            
<span class="nc" id="L331">        } catch (ApiException e) {</span>
<span class="nc" id="L332">            logger.error(&quot;Failed to create technician&quot;, e);</span>
<span class="nc" id="L333">            DisplayUtils.printError(&quot;Failed to create technician: &quot; + e.getMessage());</span>
<span class="nc" id="L334">        } catch (Exception e) {</span>
<span class="nc" id="L335">            logger.error(&quot;Unexpected error during technician creation&quot;, e);</span>
<span class="nc" id="L336">            DisplayUtils.printError(&quot;An unexpected error occurred while creating the technician.&quot;);</span>
<span class="nc" id="L337">        }</span>
        
<span class="nc" id="L339">        waitForEnter();</span>
<span class="nc" id="L340">    }</span>
    
    private void editTechnician() {
<span class="nc" id="L343">        DisplayUtils.printHeader(&quot;EDIT TECHNICIAN&quot;);</span>
        
        try {
<span class="nc" id="L346">            List&lt;Technician&gt; technicians = apiService.getAllTechnicians();</span>
            
<span class="nc bnc" id="L348" title="All 2 branches missed.">            if (technicians.isEmpty()) {</span>
<span class="nc" id="L349">                System.out.println(&quot;üì≠ No technicians found in the system.&quot;);</span>
<span class="nc" id="L350">                waitForEnter();</span>
<span class="nc" id="L351">                return;</span>
            }
            
            // Display technician selection
<span class="nc" id="L355">            System.out.println(&quot;üìã Select a technician to edit:&quot;);</span>
<span class="nc" id="L356">            System.out.println();</span>
<span class="nc" id="L357">            displayTechniciansTable(technicians);</span>
            
<span class="nc" id="L359">            System.out.print(&quot;Enter technician ID to edit (or 'b' to go back): &quot;);</span>
<span class="nc" id="L360">            String input = scanner.nextLine().trim();</span>
            
<span class="nc bnc" id="L362" title="All 2 branches missed.">            if (input.equalsIgnoreCase(&quot;b&quot;)) {</span>
<span class="nc" id="L363">                return;</span>
            }
            
            try {
<span class="nc" id="L367">                Long technicianId = Long.parseLong(input);</span>
<span class="nc" id="L368">                Technician selectedTechnician = technicians.stream()</span>
<span class="nc" id="L369">                    .filter(t -&gt; t.getId().equals(technicianId))</span>
<span class="nc" id="L370">                    .findFirst()</span>
<span class="nc" id="L371">                    .orElse(null);</span>
                    
<span class="nc bnc" id="L373" title="All 2 branches missed.">                if (selectedTechnician == null) {</span>
<span class="nc" id="L374">                    DisplayUtils.printError(&quot;Technician not found with ID: &quot; + technicianId);</span>
<span class="nc" id="L375">                    waitForEnter();</span>
<span class="nc" id="L376">                    return;</span>
                }
                
                // Use TechnicianBuilder to collect updates
<span class="nc" id="L380">                Technician updatedTechnician = technicianBuilder.buildTechnicianUpdate(selectedTechnician);</span>
                
<span class="nc bnc" id="L382" title="All 2 branches missed.">                if (updatedTechnician == null) {</span>
<span class="nc" id="L383">                    return; // User cancelled</span>
                }
                
                // Update the technician via API
<span class="nc" id="L387">                Technician result = apiService.updateTechnician(technicianId, updatedTechnician);</span>
                
<span class="nc" id="L389">                System.out.printf(&quot;‚úÖ %s updated\n&quot;, result.getFullName());</span>
                
<span class="nc" id="L391">                logger.info(&quot;Updated technician: {} (ID: {})&quot;, result.getFullName(), technicianId);</span>
                
<span class="nc" id="L393">            } catch (NumberFormatException e) {</span>
<span class="nc" id="L394">                DisplayUtils.printError(&quot;Invalid technician ID format.&quot;);</span>
<span class="nc" id="L395">            }</span>
            
<span class="nc" id="L397">        } catch (ApiException e) {</span>
<span class="nc" id="L398">            logger.error(&quot;Failed to edit technician&quot;, e);</span>
<span class="nc" id="L399">            DisplayUtils.printError(&quot;Failed to edit technician: &quot; + e.getMessage());</span>
<span class="nc" id="L400">        } catch (Exception e) {</span>
<span class="nc" id="L401">            logger.error(&quot;Unexpected error during technician editing&quot;, e);</span>
<span class="nc" id="L402">            DisplayUtils.printError(&quot;An unexpected error occurred while editing the technician.&quot;);</span>
<span class="nc" id="L403">        }</span>
        
<span class="nc" id="L405">        waitForEnter();</span>
<span class="nc" id="L406">    }</span>
    
    private void manageTechnicianStatus() {
<span class="nc" id="L409">        DisplayUtils.printHeader(&quot;TECHNICIAN STATUS MANAGEMENT&quot;);</span>
        
<span class="nc" id="L411">        System.out.println(&quot;‚ÑπÔ∏è  Status Management Information:&quot;);</span>
<span class="nc" id="L412">        System.out.println(&quot;   Change technician status between ACTIVE, ON_VACATION, SICK_LEAVE, and TERMINATED.&quot;);</span>
<span class="nc" id="L413">        System.out.println(&quot;   TERMINATED technicians cannot be assigned new tickets or appointments.&quot;);</span>
<span class="nc" id="L414">        System.out.println();</span>
<span class="nc" id="L415">        System.out.println(&quot;‚ö†Ô∏è  Note: Status changes may be restricted by server business rules.&quot;);</span>
<span class="nc" id="L416">        System.out.println(&quot;   Contact system administrator if status changes are not applied.&quot;);</span>
<span class="nc" id="L417">        System.out.println();</span>
        
        try {
<span class="nc" id="L420">            List&lt;Technician&gt; technicians = apiService.getAllTechnicians();</span>
            
<span class="nc bnc" id="L422" title="All 2 branches missed.">            if (technicians.isEmpty()) {</span>
<span class="nc" id="L423">                System.out.println(&quot;üì≠ No technicians found in the system.&quot;);</span>
<span class="nc" id="L424">                waitForEnter();</span>
<span class="nc" id="L425">                return;</span>
            }
            
            // Display technician selection
<span class="nc" id="L429">            System.out.println(&quot;üìã Select a technician to change status:&quot;);</span>
<span class="nc" id="L430">            System.out.println();</span>
<span class="nc" id="L431">            displayTechniciansTable(technicians);</span>
            
<span class="nc" id="L433">            System.out.print(&quot;Enter technician ID to change status (or 'b' to go back): &quot;);</span>
<span class="nc" id="L434">            String input = scanner.nextLine().trim();</span>
            
<span class="nc bnc" id="L436" title="All 2 branches missed.">            if (input.equalsIgnoreCase(&quot;b&quot;)) {</span>
<span class="nc" id="L437">                return;</span>
            }
            
            try {
<span class="nc" id="L441">                Long technicianId = Long.parseLong(input);</span>
<span class="nc" id="L442">                Technician selectedTechnician = technicians.stream()</span>
<span class="nc" id="L443">                    .filter(t -&gt; t.getId().equals(technicianId))</span>
<span class="nc" id="L444">                    .findFirst()</span>
<span class="nc" id="L445">                    .orElse(null);</span>
                    
<span class="nc bnc" id="L447" title="All 2 branches missed.">                if (selectedTechnician == null) {</span>
<span class="nc" id="L448">                    DisplayUtils.printError(&quot;Technician not found with ID: &quot; + technicianId);</span>
<span class="nc" id="L449">                    waitForEnter();</span>
<span class="nc" id="L450">                    return;</span>
                }
                
                // Show current status and options
<span class="nc" id="L454">                System.out.println();</span>
<span class="nc" id="L455">                System.out.printf(&quot;üìã Current Status: %s\n&quot;, selectedTechnician.getFullName());</span>
<span class="nc" id="L456">                System.out.printf(&quot;Status: %s\n&quot;, getStatusDisplay(selectedTechnician.getStatus()));</span>
<span class="nc" id="L457">                System.out.println();</span>
                
<span class="nc" id="L459">                System.out.println(&quot;üîπ Available Status Options:&quot;);</span>
<span class="nc" id="L460">                System.out.println(&quot;  1. ACTIVE - Available for assignments&quot;);</span>
<span class="nc" id="L461">                System.out.println(&quot;  2. ON_VACATION - Temporarily unavailable&quot;);</span>
<span class="nc" id="L462">                System.out.println(&quot;  3. SICK_LEAVE - On medical leave&quot;);</span>
<span class="nc" id="L463">                System.out.println(&quot;  4. TERMINATED - No longer with company&quot;);</span>
<span class="nc" id="L464">                System.out.println();</span>
                
<span class="nc" id="L466">                System.out.print(&quot;Select new status (1-4): &quot;);</span>
<span class="nc" id="L467">                String statusChoice = scanner.nextLine().trim();</span>
                
                String newStatus;
<span class="nc bnc" id="L470" title="All 5 branches missed.">                switch (statusChoice) {</span>
                    case &quot;1&quot;:
<span class="nc" id="L472">                        newStatus = &quot;ACTIVE&quot;;</span>
<span class="nc" id="L473">                        break;</span>
                    case &quot;2&quot;:
<span class="nc" id="L475">                        newStatus = &quot;ON_VACATION&quot;;</span>
<span class="nc" id="L476">                        break;</span>
                    case &quot;3&quot;:
<span class="nc" id="L478">                        newStatus = &quot;SICK_LEAVE&quot;;</span>
<span class="nc" id="L479">                        break;</span>
                    case &quot;4&quot;:
<span class="nc" id="L481">                        newStatus = &quot;TERMINATED&quot;;</span>
<span class="nc" id="L482">                        break;</span>
                    default:
<span class="nc" id="L484">                        DisplayUtils.printError(&quot;Invalid status selection.&quot;);</span>
<span class="nc" id="L485">                        waitForEnter();</span>
<span class="nc" id="L486">                        return;</span>
                }
                
<span class="nc bnc" id="L489" title="All 2 branches missed.">                if (newStatus.equals(selectedTechnician.getStatus())) {</span>
<span class="nc" id="L490">                    System.out.println(&quot;‚ÑπÔ∏è  Technician already has this status.&quot;);</span>
<span class="nc" id="L491">                    waitForEnter();</span>
<span class="nc" id="L492">                    return;</span>
                }
                
                // Confirmation
<span class="nc" id="L496">                System.out.printf(&quot;‚ö†Ô∏è  Change %s's status from %s to %s?\n&quot;, </span>
<span class="nc" id="L497">                    selectedTechnician.getFullName(), selectedTechnician.getStatus(), newStatus);</span>
                    
<span class="nc bnc" id="L499" title="All 2 branches missed.">                if (newStatus.equals(&quot;TERMINATED&quot;)) {</span>
<span class="nc" id="L500">                    System.out.println(&quot;   ‚ö†Ô∏è  TERMINATED technicians cannot be assigned new work!&quot;);</span>
                }
                
<span class="nc" id="L503">                System.out.print(&quot;Confirm status change? (y/n): &quot;);</span>
<span class="nc" id="L504">                String confirm = scanner.nextLine().trim().toLowerCase();</span>
                
<span class="nc bnc" id="L506" title="All 4 branches missed.">                if (confirm.equals(&quot;y&quot;) || confirm.equals(&quot;yes&quot;)) {</span>
                    // Update technician status
<span class="nc" id="L508">                    Technician updatedTechnician = new Technician();</span>
<span class="nc" id="L509">                    updatedTechnician.setId(selectedTechnician.getId());</span>
<span class="nc" id="L510">                    updatedTechnician.setFirstName(selectedTechnician.getFirstName());</span>
<span class="nc" id="L511">                    updatedTechnician.setLastName(selectedTechnician.getLastName());</span>
<span class="nc" id="L512">                    updatedTechnician.setFullName(selectedTechnician.getFullName());</span>
<span class="nc" id="L513">                    updatedTechnician.setEmail(selectedTechnician.getEmail());</span>
<span class="nc" id="L514">                    updatedTechnician.setPhone(selectedTechnician.getPhone());</span>
<span class="nc" id="L515">                    updatedTechnician.setSkills(selectedTechnician.getSkills());</span>
<span class="nc" id="L516">                    updatedTechnician.setStatus(newStatus);</span>
                    
                    try {
<span class="nc" id="L519">                        Technician result = apiService.updateTechnician(technicianId, updatedTechnician);</span>
                        
                        // Check if the status change was actually applied
<span class="nc bnc" id="L522" title="All 2 branches missed.">                        if (!newStatus.equals(result.getStatus())) {</span>
<span class="nc" id="L523">                            DisplayUtils.printError(&quot;‚ö†Ô∏è  Status change not applied by server.&quot;);</span>
<span class="nc" id="L524">                            System.out.println(&quot;   The server has business rules that prevent status changes through this endpoint.&quot;);</span>
<span class="nc" id="L525">                            System.out.println(&quot;   Status remains: &quot; + result.getStatus());</span>
<span class="nc" id="L526">                            System.out.println(&quot;   Contact system administrator for manual status changes.&quot;);</span>
<span class="nc" id="L527">                            logger.warn(&quot;Server prevented status change for technician ID: {} - requested: {}, actual: {}&quot;, </span>
<span class="nc" id="L528">                                technicianId, newStatus, result.getStatus());</span>
                        } else {
<span class="nc" id="L530">                            System.out.printf(&quot;‚úÖ %s status changed to %s\n&quot;, result.getFullName(), result.getStatus());</span>
<span class="nc" id="L531">                            logger.info(&quot;Updated technician status: {} (ID: {}) -&gt; {}&quot;, </span>
<span class="nc" id="L532">                                result.getFullName(), technicianId, result.getStatus());</span>
                        }
<span class="nc" id="L534">                    } catch (Exception e) {</span>
<span class="nc" id="L535">                        DisplayUtils.printError(&quot;Failed to update technician status: &quot; + e.getMessage());</span>
<span class="nc" id="L536">                        logger.error(&quot;Failed to update technician status for ID: &quot; + technicianId, e);</span>
<span class="nc" id="L537">                    }</span>
<span class="nc" id="L538">                } else {</span>
<span class="nc" id="L539">                    System.out.println(&quot;Status change cancelled.&quot;);</span>
                }
                
<span class="nc" id="L542">            } catch (NumberFormatException e) {</span>
<span class="nc" id="L543">                DisplayUtils.printError(&quot;Invalid technician ID format.&quot;);</span>
<span class="nc" id="L544">            }</span>
            
<span class="nc" id="L546">        } catch (ApiException e) {</span>
<span class="nc" id="L547">            logger.error(&quot;Failed to manage technician status&quot;, e);</span>
<span class="nc" id="L548">            DisplayUtils.printError(&quot;Failed to retrieve technicians: &quot; + e.getMessage());</span>
<span class="nc" id="L549">        }</span>
        
<span class="nc" id="L551">        waitForEnter();</span>
<span class="nc" id="L552">    }</span>
    
    private void deleteTechnician() {
<span class="nc" id="L555">        DisplayUtils.printHeader(&quot;DELETE TECHNICIAN&quot;);</span>
        
<span class="nc" id="L557">        System.out.println(&quot;‚ö†Ô∏è  Warning: Deleting technicians is a permanent action!&quot;);</span>
<span class="nc" id="L558">        System.out.println(&quot;   Consider setting status to TERMINATED instead of deleting.&quot;);</span>
<span class="nc" id="L559">        System.out.println(&quot;   Deleted technicians cannot be recovered.&quot;);</span>
<span class="nc" id="L560">        System.out.println();</span>
        
        try {
<span class="nc" id="L563">            List&lt;Technician&gt; technicians = apiService.getAllTechnicians();</span>
            
<span class="nc bnc" id="L565" title="All 2 branches missed.">            if (technicians.isEmpty()) {</span>
<span class="nc" id="L566">                System.out.println(&quot;üì≠ No technicians found in the system.&quot;);</span>
<span class="nc" id="L567">                waitForEnter();</span>
<span class="nc" id="L568">                return;</span>
            }
            
            // Display technician selection
<span class="nc" id="L572">            System.out.println(&quot;üìã Select a technician to delete:&quot;);</span>
<span class="nc" id="L573">            System.out.println();</span>
<span class="nc" id="L574">            displayTechniciansTable(technicians);</span>
            
<span class="nc" id="L576">            System.out.print(&quot;Enter technician ID to delete (or 'b' to go back): &quot;);</span>
<span class="nc" id="L577">            String input = scanner.nextLine().trim();</span>
            
<span class="nc bnc" id="L579" title="All 2 branches missed.">            if (input.equalsIgnoreCase(&quot;b&quot;)) {</span>
<span class="nc" id="L580">                return;</span>
            }
            
            try {
<span class="nc" id="L584">                Long technicianId = Long.parseLong(input);</span>
<span class="nc" id="L585">                Technician selectedTechnician = technicians.stream()</span>
<span class="nc" id="L586">                    .filter(t -&gt; t.getId().equals(technicianId))</span>
<span class="nc" id="L587">                    .findFirst()</span>
<span class="nc" id="L588">                    .orElse(null);</span>
                    
<span class="nc bnc" id="L590" title="All 2 branches missed.">                if (selectedTechnician == null) {</span>
<span class="nc" id="L591">                    DisplayUtils.printError(&quot;Technician not found with ID: &quot; + technicianId);</span>
<span class="nc" id="L592">                    waitForEnter();</span>
<span class="nc" id="L593">                    return;</span>
                }
                
                // Show technician details and warnings
<span class="nc" id="L597">                System.out.println();</span>
<span class="nc" id="L598">                displayTechnicianSummary(selectedTechnician);</span>
                
                // Check if technician is active
<span class="nc bnc" id="L601" title="All 2 branches missed.">                if (selectedTechnician.isActive()) {</span>
<span class="nc" id="L602">                    System.out.println(&quot;‚ö†Ô∏è  This technician is currently ACTIVE!&quot;);</span>
<span class="nc" id="L603">                    System.out.println(&quot;   Consider setting status to TERMINATED first.&quot;);</span>
<span class="nc" id="L604">                    System.out.println();</span>
                }
                
                // Multi-step confirmation
<span class="nc" id="L608">                System.out.println(&quot;üîπ Deletion Confirmation Process:&quot;);</span>
<span class="nc" id="L609">                System.out.println(&quot;   Step 1: Confirm technician selection&quot;);</span>
<span class="nc" id="L610">                System.out.println(&quot;   Step 2: Type technician name for verification&quot;);</span>
<span class="nc" id="L611">                System.out.println(&quot;   Step 3: Final deletion confirmation&quot;);</span>
<span class="nc" id="L612">                System.out.println();</span>
                
                // Step 1: Confirm selection
<span class="nc" id="L615">                System.out.printf(&quot;Step 1: Delete technician %s? (y/n): &quot;, selectedTechnician.getFullName());</span>
<span class="nc" id="L616">                String confirm1 = scanner.nextLine().trim().toLowerCase();</span>
                
<span class="nc bnc" id="L618" title="All 4 branches missed.">                if (!confirm1.equals(&quot;y&quot;) &amp;&amp; !confirm1.equals(&quot;yes&quot;)) {</span>
<span class="nc" id="L619">                    System.out.println(&quot;Deletion cancelled.&quot;);</span>
<span class="nc" id="L620">                    waitForEnter();</span>
<span class="nc" id="L621">                    return;</span>
                }
                
                // Step 2: Name verification
<span class="nc" id="L625">                System.out.printf(&quot;Step 2: Type the technician's full name '%s' to verify: &quot;, </span>
<span class="nc" id="L626">                    selectedTechnician.getFullName());</span>
<span class="nc" id="L627">                String nameVerification = scanner.nextLine().trim();</span>
                
<span class="nc bnc" id="L629" title="All 2 branches missed.">                if (!nameVerification.equals(selectedTechnician.getFullName())) {</span>
<span class="nc" id="L630">                    DisplayUtils.printError(&quot;Name verification failed. Deletion cancelled.&quot;);</span>
<span class="nc" id="L631">                    waitForEnter();</span>
<span class="nc" id="L632">                    return;</span>
                }
                
                // Step 3: Final confirmation
<span class="nc" id="L636">                System.out.print(&quot;Step 3: Type 'DELETE' to confirm permanent deletion: &quot;);</span>
<span class="nc" id="L637">                String finalConfirm = scanner.nextLine().trim();</span>
                
<span class="nc bnc" id="L639" title="All 2 branches missed.">                if (!finalConfirm.equals(&quot;DELETE&quot;)) {</span>
<span class="nc" id="L640">                    System.out.println(&quot;Final confirmation failed. Deletion cancelled.&quot;);</span>
<span class="nc" id="L641">                    waitForEnter();</span>
<span class="nc" id="L642">                    return;</span>
                }
                
                // Attempt deletion
                try {
<span class="nc" id="L647">                    apiService.deleteTechnician(technicianId);</span>
<span class="nc" id="L648">                    System.out.printf(&quot;‚úÖ %s deleted\n&quot;, selectedTechnician.getFullName());</span>
<span class="nc" id="L649">                    logger.info(&quot;Deleted technician: {} (ID: {})&quot;, selectedTechnician.getFullName(), technicianId);</span>
                    
<span class="nc" id="L651">                } catch (ApiException e) {</span>
<span class="nc bnc" id="L652" title="All 2 branches missed.">                    if (e.getStatusCode() == 409) {</span>
<span class="nc" id="L653">                        System.out.println();</span>
<span class="nc" id="L654">                        DisplayUtils.printError(&quot;‚ùå Cannot delete technician&quot;);</span>
<span class="nc" id="L655">                        System.out.println(&quot;   Server message: &quot; + e.getMessage());</span>
<span class="nc" id="L656">                        System.out.println();</span>
<span class="nc" id="L657">                        System.out.println(&quot;üîπ Alternative Actions:&quot;);</span>
<span class="nc" id="L658">                        System.out.println(&quot;   1. Set technician status to TERMINATED instead&quot;);</span>
<span class="nc" id="L659">                        System.out.println(&quot;   2. Contact system administrator to resolve dependencies&quot;);</span>
<span class="nc" id="L660">                        System.out.println(&quot;   3. Check for active tickets or assignments&quot;);</span>
<span class="nc" id="L661">                        System.out.println();</span>
<span class="nc" id="L662">                        System.out.println(&quot;üí° Tip: TERMINATED technicians remain in the system for reporting&quot;);</span>
<span class="nc" id="L663">                        System.out.println(&quot;        but cannot be assigned new work.&quot;);</span>
                        // Log as info since this is expected business logic, not an error
<span class="nc" id="L665">                        logger.info(&quot;Delete operation blocked by server for technician ID: {} (expected business rule)&quot;, technicianId);</span>
                    } else {
<span class="nc" id="L667">                        DisplayUtils.printError(&quot;Failed to delete technician: &quot; + e.getMessage());</span>
<span class="nc" id="L668">                        logger.error(&quot;Failed to delete technician ID: &quot; + technicianId, e);</span>
                    }
<span class="nc" id="L670">                }</span>
                
<span class="nc" id="L672">            } catch (NumberFormatException e) {</span>
<span class="nc" id="L673">                DisplayUtils.printError(&quot;Invalid technician ID format.&quot;);</span>
<span class="nc" id="L674">            }</span>
            
<span class="nc" id="L676">        } catch (ApiException e) {</span>
<span class="nc" id="L677">            logger.error(&quot;Failed to retrieve technicians for deletion&quot;, e);</span>
<span class="nc" id="L678">            DisplayUtils.printError(&quot;Failed to retrieve technicians: &quot; + e.getMessage());</span>
<span class="nc" id="L679">        }</span>
        
<span class="nc" id="L681">        waitForEnter();</span>
<span class="nc" id="L682">    }</span>
    
    private void technicianReports() {
<span class="nc" id="L685">        DisplayUtils.printHeader(&quot;TECHNICIAN REPORTS &amp; ANALYTICS&quot;);</span>
        
        try {
<span class="nc" id="L688">            List&lt;Technician&gt; technicians = apiService.getAllTechnicians();</span>
            
<span class="nc bnc" id="L690" title="All 2 branches missed.">            if (technicians.isEmpty()) {</span>
<span class="nc" id="L691">                System.out.println(&quot;üì≠ No technicians found in the system.&quot;);</span>
<span class="nc" id="L692">                waitForEnter();</span>
<span class="nc" id="L693">                return;</span>
            }
            
            // Calculate statistics
<span class="nc" id="L697">            long totalCount = technicians.size();</span>
<span class="nc" id="L698">            long activeCount = technicians.stream().filter(t -&gt; &quot;ACTIVE&quot;.equals(t.getStatus())).count();</span>
<span class="nc" id="L699">            long vacationCount = technicians.stream().filter(t -&gt; &quot;ON_VACATION&quot;.equals(t.getStatus())).count();</span>
<span class="nc" id="L700">            long sickCount = technicians.stream().filter(t -&gt; &quot;SICK_LEAVE&quot;.equals(t.getStatus())).count();</span>
<span class="nc" id="L701">            long terminatedCount = technicians.stream().filter(t -&gt; &quot;TERMINATED&quot;.equals(t.getStatus())).count();</span>
            
            // Skill analysis
<span class="nc" id="L704">            Map&lt;String, Long&gt; skillCounts = technicians.stream()</span>
<span class="nc bnc" id="L705" title="All 2 branches missed.">                .filter(t -&gt; t.getSkills() != null)</span>
<span class="nc" id="L706">                .flatMap(t -&gt; t.getSkills().stream())</span>
<span class="nc" id="L707">                .collect(Collectors.groupingBy(skill -&gt; skill, Collectors.counting()));</span>
            
            // Workload analysis
<span class="nc" id="L710">            int totalWorkload = technicians.stream()</span>
<span class="nc bnc" id="L711" title="All 2 branches missed.">                .filter(t -&gt; t.getCurrentWorkload() != null)</span>
<span class="nc" id="L712">                .mapToInt(Technician::getCurrentWorkload)</span>
<span class="nc" id="L713">                .sum();</span>
<span class="nc" id="L714">            double avgWorkload = technicians.stream()</span>
<span class="nc bnc" id="L715" title="All 2 branches missed.">                .filter(t -&gt; t.getCurrentWorkload() != null)</span>
<span class="nc" id="L716">                .mapToInt(Technician::getCurrentWorkload)</span>
<span class="nc" id="L717">                .average()</span>
<span class="nc" id="L718">                .orElse(0.0);</span>
            
            // Display report
<span class="nc" id="L721">            System.out.println(&quot;üìä TECHNICIAN SYSTEM OVERVIEW&quot;);</span>
<span class="nc" id="L722">            System.out.println(&quot;‚ïê&quot;.repeat(80));</span>
<span class="nc" id="L723">            System.out.printf(&quot;Total Technicians:      %d\n&quot;, totalCount);</span>
<span class="nc" id="L724">            System.out.printf(&quot;Active:                  %d (%.1f%%)\n&quot;, activeCount, </span>
<span class="nc" id="L725">                (activeCount * 100.0 / totalCount));</span>
<span class="nc" id="L726">            System.out.printf(&quot;On Vacation:             %d (%.1f%%)\n&quot;, vacationCount, </span>
<span class="nc" id="L727">                (vacationCount * 100.0 / totalCount));</span>
<span class="nc" id="L728">            System.out.printf(&quot;Sick Leave:              %d (%.1f%%)\n&quot;, sickCount, </span>
<span class="nc" id="L729">                (sickCount * 100.0 / totalCount));</span>
<span class="nc" id="L730">            System.out.printf(&quot;Terminated:              %d (%.1f%%)\n&quot;, terminatedCount, </span>
<span class="nc" id="L731">                (terminatedCount * 100.0 / totalCount));</span>
<span class="nc" id="L732">            System.out.println();</span>
            
<span class="nc" id="L734">            System.out.println(&quot;üíº WORKLOAD ANALYSIS&quot;);</span>
<span class="nc" id="L735">            System.out.println(&quot;‚îÄ&quot;.repeat(40));</span>
<span class="nc" id="L736">            System.out.printf(&quot;Total Current Workload:  %d tickets\n&quot;, totalWorkload);</span>
<span class="nc" id="L737">            System.out.printf(&quot;Average Workload:        %.1f tickets/technician\n&quot;, avgWorkload);</span>
<span class="nc" id="L738">            System.out.println();</span>
            
<span class="nc" id="L740">            System.out.println(&quot;üõ†Ô∏è  SKILL COVERAGE&quot;);</span>
<span class="nc" id="L741">            System.out.println(&quot;‚îÄ&quot;.repeat(40));</span>
<span class="nc bnc" id="L742" title="All 2 branches missed.">            if (skillCounts.isEmpty()) {</span>
<span class="nc" id="L743">                System.out.println(&quot;No skill data available&quot;);</span>
            } else {
<span class="nc" id="L745">                skillCounts.entrySet().stream()</span>
<span class="nc" id="L746">                    .sorted((e1, e2) -&gt; e2.getValue().compareTo(e1.getValue()))</span>
<span class="nc" id="L747">                    .forEach(entry -&gt; {</span>
<span class="nc" id="L748">                        double percentage = (entry.getValue() * 100.0 / totalCount);</span>
<span class="nc" id="L749">                        System.out.printf(&quot;%-12s: %d technicians (%.1f%%)\n&quot;, </span>
<span class="nc" id="L750">                            entry.getKey(), entry.getValue(), percentage);</span>
<span class="nc" id="L751">                    });</span>
            }
<span class="nc" id="L753">            System.out.println();</span>
            
            // System health indicators
<span class="nc" id="L756">            System.out.println(&quot;üè• SYSTEM HEALTH&quot;);</span>
<span class="nc" id="L757">            System.out.println(&quot;‚îÄ&quot;.repeat(40));</span>
            
<span class="nc" id="L759">            double availabilityRate = (activeCount * 100.0 / totalCount);</span>
<span class="nc bnc" id="L760" title="All 2 branches missed.">            if (availabilityRate &gt;= 80) {</span>
<span class="nc" id="L761">                System.out.printf(&quot;‚úÖ Technician Availability: %.1f%% (Excellent)\n&quot;, availabilityRate);</span>
<span class="nc bnc" id="L762" title="All 2 branches missed.">            } else if (availabilityRate &gt;= 60) {</span>
<span class="nc" id="L763">                System.out.printf(&quot;‚ö†Ô∏è  Technician Availability: %.1f%% (Moderate)\n&quot;, availabilityRate);</span>
            } else {
<span class="nc" id="L765">                System.out.printf(&quot;‚ùå Technician Availability: %.1f%% (Critical)\n&quot;, availabilityRate);</span>
            }
            
<span class="nc bnc" id="L768" title="All 2 branches missed.">            if (avgWorkload &lt;= 3) {</span>
<span class="nc" id="L769">                System.out.printf(&quot;‚úÖ Average Workload: %.1f tickets (Healthy)\n&quot;, avgWorkload);</span>
<span class="nc bnc" id="L770" title="All 2 branches missed.">            } else if (avgWorkload &lt;= 6) {</span>
<span class="nc" id="L771">                System.out.printf(&quot;‚ö†Ô∏è  Average Workload: %.1f tickets (High)\n&quot;, avgWorkload);</span>
            } else {
<span class="nc" id="L773">                System.out.printf(&quot;‚ùå Average Workload: %.1f tickets (Overloaded)\n&quot;, avgWorkload);</span>
            }
            
<span class="nc" id="L776">            System.out.println();</span>
<span class="nc" id="L777">            System.out.println(&quot;üìà RECOMMENDATIONS&quot;);</span>
<span class="nc" id="L778">            System.out.println(&quot;‚îÄ&quot;.repeat(40));</span>
            
<span class="nc bnc" id="L780" title="All 2 branches missed.">            if (availabilityRate &lt; 70) {</span>
<span class="nc" id="L781">                System.out.println(&quot;‚Ä¢ Consider hiring additional technicians&quot;);</span>
            }
<span class="nc bnc" id="L783" title="All 2 branches missed.">            if (avgWorkload &gt; 5) {</span>
<span class="nc" id="L784">                System.out.println(&quot;‚Ä¢ Review workload distribution and assignment policies&quot;);</span>
            }
<span class="nc bnc" id="L786" title="All 4 branches missed.">            if (skillCounts.values().stream().anyMatch(count -&gt; count &lt; 2)) {</span>
<span class="nc" id="L787">                System.out.println(&quot;‚Ä¢ Consider cross-training technicians for better skill coverage&quot;);</span>
            }
<span class="nc bnc" id="L789" title="All 2 branches missed.">            if (activeCount &lt; 3) {</span>
<span class="nc" id="L790">                System.out.println(&quot;‚Ä¢ Ensure minimum staffing levels for service continuity&quot;);</span>
            }
            
<span class="nc" id="L793">        } catch (ApiException e) {</span>
<span class="nc" id="L794">            logger.error(&quot;Failed to generate technician reports&quot;, e);</span>
<span class="nc" id="L795">            DisplayUtils.printError(&quot;Failed to generate reports: &quot; + e.getMessage());</span>
<span class="nc" id="L796">        }</span>
        
<span class="nc" id="L798">        waitForEnter();</span>
<span class="nc" id="L799">    }</span>
    
    // ==================== HELPER METHODS ====================
    
    private void displayTechniciansTable(List&lt;Technician&gt; technicians) {
<span class="nc" id="L804">        System.out.printf(&quot;%-4s %-25s %-35s %-15s %-20s %s\n&quot;, </span>
            &quot;ID&quot;, &quot;Name&quot;, &quot;Email&quot;, &quot;Status&quot;, &quot;Skills&quot;, &quot;Workload&quot;);
<span class="nc" id="L806">        System.out.println(&quot;‚îÄ&quot;.repeat(120));</span>
        
<span class="nc bnc" id="L808" title="All 2 branches missed.">        for (Technician technician : technicians) {</span>
<span class="nc bnc" id="L809" title="All 2 branches missed.">            String skillsDisplay = technician.getSkills() != null ? </span>
<span class="nc" id="L810">                String.join(&quot;, &quot;, technician.getSkills()) : &quot;None&quot;;</span>
<span class="nc bnc" id="L811" title="All 2 branches missed.">            if (skillsDisplay.length() &gt; 18) {</span>
<span class="nc" id="L812">                skillsDisplay = skillsDisplay.substring(0, 15) + &quot;...&quot;;</span>
            }
            
<span class="nc bnc" id="L815" title="All 2 branches missed.">            String workloadDisplay = technician.getCurrentWorkload() != null ? </span>
<span class="nc" id="L816">                technician.getCurrentWorkload().toString() : &quot;N/A&quot;;</span>
            
<span class="nc" id="L818">            System.out.printf(&quot;%-4d %-25s %-35s %-15s %-20s %s\n&quot;,</span>
<span class="nc" id="L819">                technician.getId(),</span>
<span class="nc" id="L820">                truncate(technician.getFullName(), 25),</span>
<span class="nc" id="L821">                truncate(technician.getEmail(), 35),</span>
<span class="nc" id="L822">                getStatusDisplay(technician.getStatus()),</span>
                skillsDisplay,
                workloadDisplay
            );
<span class="nc" id="L826">        }</span>
<span class="nc" id="L827">    }</span>
    
    private void displayTechnicianDetails(Technician technician) {
<span class="nc" id="L830">        System.out.println();</span>
<span class="nc" id="L831">        DisplayUtils.printHeader(&quot;TECHNICIAN DETAILS - &quot; + technician.getFullName());</span>
        
<span class="nc" id="L833">        System.out.println(&quot;üë§ Personal Information&quot;);</span>
<span class="nc" id="L834">        System.out.println(&quot;‚îÄ&quot;.repeat(80));</span>
<span class="nc" id="L835">        System.out.printf(&quot;  Name:          %s\n&quot;, technician.getFullName());</span>
<span class="nc" id="L836">        System.out.printf(&quot;  Email:         %s\n&quot;, technician.getEmail());</span>
<span class="nc bnc" id="L837" title="All 2 branches missed.">        System.out.printf(&quot;  Phone:         %s\n&quot;, technician.getPhone() != null ? technician.getPhone() : &quot;Not provided&quot;);</span>
<span class="nc" id="L838">        System.out.printf(&quot;  Status:        %s\n&quot;, getStatusDisplay(technician.getStatus()));</span>
<span class="nc bnc" id="L839" title="All 4 branches missed.">        System.out.printf(&quot;  Available:     %s\n&quot;, technician.getAvailable() != null &amp;&amp; technician.getAvailable() ? &quot;Yes&quot; : &quot;No&quot;);</span>
        
<span class="nc bnc" id="L841" title="All 2 branches missed.">        if (technician.getCreatedAt() != null) {</span>
<span class="nc" id="L842">            System.out.printf(&quot;  Joined:        %s\n&quot;, technician.getCreatedAt().format(DateTimeFormatter.ofPattern(&quot;MMM dd, yyyy&quot;)));</span>
        }
<span class="nc" id="L844">        System.out.println();</span>
        
<span class="nc" id="L846">        System.out.println(&quot;üõ†Ô∏è  Skills &amp; Capabilities&quot;);</span>
<span class="nc" id="L847">        System.out.println(&quot;‚îÄ&quot;.repeat(80));</span>
<span class="nc bnc" id="L848" title="All 4 branches missed.">        if (technician.getSkills() != null &amp;&amp; !technician.getSkills().isEmpty()) {</span>
<span class="nc" id="L849">            technician.getSkills().forEach(skill -&gt; System.out.printf(&quot;  ‚Ä¢ %s\n&quot;, skill));</span>
        } else {
<span class="nc" id="L851">            System.out.println(&quot;  No skills defined&quot;);</span>
        }
<span class="nc" id="L853">        System.out.println();</span>
        
<span class="nc" id="L855">        System.out.println(&quot;üíº Current Workload&quot;);</span>
<span class="nc" id="L856">        System.out.println(&quot;‚îÄ&quot;.repeat(80));</span>
<span class="nc bnc" id="L857" title="All 2 branches missed.">        if (technician.getCurrentWorkload() != null) {</span>
<span class="nc" id="L858">            System.out.printf(&quot;  Active Tickets: %d\n&quot;, technician.getCurrentWorkload());</span>
            
            // Try to fetch actual tickets for more detail
            try {
<span class="nc" id="L862">                List&lt;Ticket&gt; tickets = apiService.getTicketsByTechnician(technician.getId());</span>
<span class="nc" id="L863">                long openTickets = tickets.stream()</span>
<span class="nc bnc" id="L864" title="All 2 branches missed.">                    .filter(t -&gt; !&quot;CLOSED&quot;.equalsIgnoreCase(t.getStatus()))</span>
<span class="nc" id="L865">                    .count();</span>
<span class="nc" id="L866">                System.out.printf(&quot;  Open Tickets:   %d\n&quot;, openTickets);</span>
                
<span class="nc bnc" id="L868" title="All 2 branches missed.">                if (!tickets.isEmpty()) {</span>
<span class="nc" id="L869">                    System.out.println(&quot;  Recent Tickets:&quot;);</span>
<span class="nc" id="L870">                    tickets.stream()</span>
<span class="nc" id="L871">                        .limit(3)</span>
<span class="nc" id="L872">                        .forEach(ticket -&gt; System.out.printf(&quot;    ‚Ä¢ #%d - %s (%s)\n&quot;, </span>
<span class="nc" id="L873">                            ticket.getId(), </span>
<span class="nc" id="L874">                            truncate(ticket.getTitle(), 40), </span>
<span class="nc" id="L875">                            ticket.getStatus()));</span>
                }
<span class="nc" id="L877">            } catch (ApiException e) {</span>
<span class="nc" id="L878">                logger.warn(&quot;Could not fetch tickets for technician {}&quot;, technician.getId());</span>
<span class="nc" id="L879">            }</span>
        } else {
<span class="nc" id="L881">            System.out.println(&quot;  Workload information not available&quot;);</span>
        }
<span class="nc" id="L883">        System.out.println();</span>
        
<span class="nc" id="L885">        System.out.println(&quot;üîπ Available Actions&quot;);</span>
<span class="nc" id="L886">        System.out.println(&quot;‚îÄ&quot;.repeat(80));</span>
<span class="nc" id="L887">        System.out.println(&quot;  1. Edit Technician Information&quot;);</span>
<span class="nc" id="L888">        System.out.println(&quot;  2. Change Status&quot;);</span>
<span class="nc" id="L889">        System.out.println(&quot;  3. View Assigned Tickets&quot;);</span>
<span class="nc" id="L890">        System.out.println(&quot;  4. View Schedule&quot;);</span>
<span class="nc" id="L891">        System.out.println(&quot;  5. Delete Technician&quot;);</span>
<span class="nc" id="L892">        System.out.println();</span>
<span class="nc" id="L893">    }</span>
    
    private void displayTechnicianSummary(Technician technician) {
<span class="nc" id="L896">        System.out.printf(&quot;üìã Technician: %s\n&quot;, technician.getFullName());</span>
<span class="nc" id="L897">        System.out.printf(&quot;   Email: %s\n&quot;, technician.getEmail());</span>
<span class="nc" id="L898">        System.out.printf(&quot;   Status: %s\n&quot;, technician.getStatus());</span>
<span class="nc" id="L899">        System.out.printf(&quot;   Skills: %s\n&quot;, </span>
<span class="nc bnc" id="L900" title="All 2 branches missed.">            technician.getSkills() != null ? String.join(&quot;, &quot;, technician.getSkills()) : &quot;None&quot;);</span>
<span class="nc" id="L901">        System.out.printf(&quot;   Current Workload: %s\n&quot;, </span>
<span class="nc bnc" id="L902" title="All 2 branches missed.">            technician.getCurrentWorkload() != null ? technician.getCurrentWorkload().toString() : &quot;N/A&quot;);</span>
<span class="nc" id="L903">    }</span>
    
    private String getStatusDisplay(String status) {
<span class="nc bnc" id="L906" title="All 2 branches missed.">        if (status == null) return &quot;UNKNOWN&quot;;</span>
        
<span class="nc bnc" id="L908" title="All 5 branches missed.">        switch (status) {</span>
            case &quot;ACTIVE&quot;:
<span class="nc" id="L910">                return &quot;üü¢ ACTIVE&quot;;</span>
            case &quot;ON_VACATION&quot;:
<span class="nc" id="L912">                return &quot;üü° ON_VACATION&quot;;</span>
            case &quot;SICK_LEAVE&quot;:
<span class="nc" id="L914">                return &quot;üü† SICK_LEAVE&quot;;</span>
            case &quot;TERMINATED&quot;:
<span class="nc" id="L916">                return &quot;üî¥ TERMINATED&quot;;</span>
            default:
<span class="nc" id="L918">                return status;</span>
        }
    }
    
    private String truncate(String text, int maxLength) {
<span class="nc bnc" id="L923" title="All 2 branches missed.">        if (text == null) return &quot;&quot;;</span>
<span class="nc bnc" id="L924" title="All 2 branches missed.">        return text.length() &gt; maxLength ? text.substring(0, maxLength - 3) + &quot;...&quot; : text;</span>
    }
} 
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>